<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="python">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>2. Tutorial &#8212; eonr 1.0.0 documentation</title>
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <script async="async" integrity="sha384-......" type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"extensions": ["tex2jax.js"], "jax": ["input/TeX", "output/HTML-CSS"], "tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    <script type="text/javascript" src="_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="3. Background" href="background.html" />
    <link rel="prev" title="1. Installation" href="installation.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">
          EONR</a>
        <span class="navbar-text navbar-version pull-left"><b>1.0.0</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="https://github.com/tnigon/eonr">Github</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">1. Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">2. Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="background.html">3. Background</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_use.html">4. Advanced Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">5. API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="theory.html">6. Theory</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">7. License</a></li>
<li class="toctree-l1"><a class="reference internal" href="eonr.html">8. eonr package</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page Menu <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">2. Tutorial</a><ul>
<li><a class="reference internal" href="#Install-Python">2.1. Install Python</a></li>
<li><a class="reference internal" href="#Load-modules">2.2. Load modules</a></li>
<li><a class="reference internal" href="#Load-the-data">2.3. Load the data</a></li>
<li><a class="reference internal" href="#Set-column-names-(pre-init)">2.4. Set column names <em>(pre-init)</em></a></li>
<li><a class="reference internal" href="#Set-units">2.5. Set units</a></li>
<li><a class="reference internal" href="#Set-economic-conditions">2.6. Set economic conditions</a></li>
<li><a class="reference internal" href="#Initialize-EONR">2.7. Initialize <code class="docutils literal notranslate"><span class="pre">EONR</span></code></a></li>
<li><a class="reference internal" href="#Calculate-the-EONR">2.8. Calculate the EONR</a></li>
<li><a class="reference internal" href="#Plotting-the-EONR">2.9. Plotting the EONR</a></li>
<li><a class="reference internal" href="#Accesing-complete-results">2.10. Accesing complete results</a></li>
<li><a class="reference internal" href="#Visualizing-all-confidence-intervals">2.11. Visualizing all confidence intervals</a></li>
<li><a class="reference internal" href="#Accessing-complete-CI-results">2.12. Accessing complete CI results</a></li>
<li><a class="reference internal" href="#Adjusting-the-economic-scenario">2.13. Adjusting the economic scenario</a></li>
<li><a class="reference internal" href="#Environmental-observations">2.14. Environmental observations</a></li>
<li><a class="reference internal" href="#Set-column-names-(post-init)">2.15. Set column names <em>(post-init)</em></a></li>
<li><a class="reference internal" href="#Run-EONR-for-the-socially-optimum-rate">2.16. Run <code class="docutils literal notranslate"><span class="pre">EONR</span></code> for the socially optimum rate</a></li>
<li><a class="reference internal" href="#Saving-the-data">2.17. Saving the data</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="installation.html" title="Previous Chapter: 1. Installation"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; 1. Installation</span>
    </a>
  </li>
  <li>
    <a href="background.html" title="Next Chapter: 3. Background"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">3. Background &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="_sources/tutorial.ipynb.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput,
div.nbinput div.prompt,
div.nbinput div.input_area,
div.nbinput div[class*=highlight],
div.nbinput div[class*=highlight] pre,
div.nboutput,
div.nbinput div.prompt,
div.nbinput div.output_area,
div.nboutput div[class*=highlight],
div.nboutput div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput,
div.nboutput {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput,
    div.nboutput {
        flex-direction: column;
    }
}

/* input container */
div.nbinput {
    padding-top: 5px;
}

/* last container */
div.nblast {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput div.prompt,
div.nboutput div.prompt {
    min-width: 7ex;
    padding-top: 0.4em;
    padding-right: 0.4em;
    text-align: right;
    flex: 0;
}
@media (max-width: 540px) {
    div.nbinput div.prompt,
    div.nboutput div.prompt {
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput div.prompt.empty {
        padding: 0;
    }
}

/* disable scrollbars on prompts */
div.nbinput div.prompt pre,
div.nboutput div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput div.input_area,
div.nboutput div.output_area {
    padding: 0.4em;
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput div.input_area,
    div.nboutput div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    background: #f5f5f5;
}

/* override MathJax center alignment in output cells */
div.nboutput div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput div.math p {
    text-align: left;
}

/* standard error */
div.nboutput div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}
</style>
<div class="section" id="Tutorial">
<h1>2. Tutorial<a class="headerlink" href="#Tutorial" title="Permalink to this headline">¶</a></h1>
<div class="section" id="Install-Python">
<h2>2.1. Install Python<a class="headerlink" href="#Install-Python" title="Permalink to this headline">¶</a></h2>
<p>The EONR package was designed to be used with as little Python expertise as possible. However, you may find it to your benefit to become at least a little bit familiar with Python before using EONR. If you’re a beginner, it will be helpful to read the <a class="reference external" href="https://docs.python.org/3/tutorial/">Python Tutorial</a> and/or get some hands-on practice with <a class="reference external" href="https://www.w3schools.com/python/">this Python Tutorial by w3Schools</a>.</p>
<p><em>Code for all the examples is located in your</em> <code class="docutils literal notranslate"><span class="pre">PYTHONPATH/Lib/site-packages/eonr/examples</span></code> <em>folder. With that said, you should be able to make use of</em> <code class="docutils literal notranslate"><span class="pre">EONR</span></code> <em>by following and executing the commands in this tutorial, with the only exception that you substitute in your data.</em></p>
<p><em>You will find the following code included in the</em> <code class="docutils literal notranslate"><span class="pre">quick_start.py</span></code> <em>or</em> <code class="docutils literal notranslate"><span class="pre">quick_start.ipynb</span></code> <em>(for</em><a class="reference external" href="https://jupyter.org/">Jupyter notebooks</a><em>) files in your</em> <code class="docutils literal notranslate"><span class="pre">PYTHONPATH/Lib/site-packages/eonr/examples</span></code> <em>folder - feel free to load that into your Python IDE to follow along.</em></p>
</div>
<hr class="docutils" />
<div class="section" id="Load-modules">
<h2>2.2. Load modules<a class="headerlink" href="#Load-modules" title="Permalink to this headline">¶</a></h2>
<p>After <a class="reference internal" href="installation.html"><span class="doc">installation</span></a>, load <code class="docutils literal notranslate"><span class="pre">Pandas</span></code> and the <code class="docutils literal notranslate"><span class="pre">EONR</span></code> module in a Python interpreter:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">eonr</span> <span class="k">import</span> <span class="n">EONR</span>
</pre></div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="Load-the-data">
<h2>2.3. Load the data<a class="headerlink" href="#Load-the-data" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">EONR</span></code> uses Pandas dataframes to access and manipulate the experimental data.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">df_data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;data\minnesota_2012.csv&#39;</span><span class="p">)</span>
<span class="n">df_data</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-intense-fg ansi-bold">---------------------------------------------------------------------------</span>
<span class="ansi-red-intense-fg ansi-bold">FileNotFoundError</span>                         Traceback (most recent call last)
<span class="ansi-green-intense-fg ansi-bold">&lt;ipython-input-2-934839d6014a&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-intense-fg ansi-bold">----&gt; 1</span><span class="ansi-yellow-intense-fg ansi-bold"> </span>df_data <span class="ansi-yellow-intense-fg ansi-bold">=</span> pd<span class="ansi-yellow-intense-fg ansi-bold">.</span>read_csv<span class="ansi-yellow-intense-fg ansi-bold">(</span><span class="ansi-blue-intense-fg ansi-bold">r&#39;data\minnesota_2012.csv&#39;</span><span class="ansi-yellow-intense-fg ansi-bold">)</span>
<span class="ansi-green-fg">      2</span> df_data

<span class="ansi-green-intense-fg ansi-bold">C:\Anaconda3\lib\site-packages\pandas\io\parsers.py</span> in <span class="ansi-cyan-fg">parser_f</span><span class="ansi-blue-intense-fg ansi-bold">(filepath_or_buffer, sep, delimiter, header, names, index_col, usecols, squeeze, prefix, mangle_dupe_cols, dtype, engine, converters, true_values, false_values, skipinitialspace, skiprows, skipfooter, nrows, na_values, keep_default_na, na_filter, verbose, skip_blank_lines, parse_dates, infer_datetime_format, keep_date_col, date_parser, dayfirst, iterator, chunksize, compression, thousands, decimal, lineterminator, quotechar, quoting, doublequote, escapechar, comment, encoding, dialect, tupleize_cols, error_bad_lines, warn_bad_lines, delim_whitespace, low_memory, memory_map, float_precision)</span>
<span class="ansi-green-fg">    700</span>                     skip_blank_lines=skip_blank_lines)
<span class="ansi-green-fg">    701</span>
<span class="ansi-green-intense-fg ansi-bold">--&gt; 702</span><span class="ansi-yellow-intense-fg ansi-bold">         </span><span class="ansi-green-intense-fg ansi-bold">return</span> _read<span class="ansi-yellow-intense-fg ansi-bold">(</span>filepath_or_buffer<span class="ansi-yellow-intense-fg ansi-bold">,</span> kwds<span class="ansi-yellow-intense-fg ansi-bold">)</span>
<span class="ansi-green-fg">    703</span>
<span class="ansi-green-fg">    704</span>     parser_f<span class="ansi-yellow-intense-fg ansi-bold">.</span>__name__ <span class="ansi-yellow-intense-fg ansi-bold">=</span> name

<span class="ansi-green-intense-fg ansi-bold">C:\Anaconda3\lib\site-packages\pandas\io\parsers.py</span> in <span class="ansi-cyan-fg">_read</span><span class="ansi-blue-intense-fg ansi-bold">(filepath_or_buffer, kwds)</span>
<span class="ansi-green-fg">    427</span>
<span class="ansi-green-fg">    428</span>     <span class="ansi-red-intense-fg ansi-bold"># Create the parser.</span>
<span class="ansi-green-intense-fg ansi-bold">--&gt; 429</span><span class="ansi-yellow-intense-fg ansi-bold">     </span>parser <span class="ansi-yellow-intense-fg ansi-bold">=</span> TextFileReader<span class="ansi-yellow-intense-fg ansi-bold">(</span>filepath_or_buffer<span class="ansi-yellow-intense-fg ansi-bold">,</span> <span class="ansi-yellow-intense-fg ansi-bold">**</span>kwds<span class="ansi-yellow-intense-fg ansi-bold">)</span>
<span class="ansi-green-fg">    430</span>
<span class="ansi-green-fg">    431</span>     <span class="ansi-green-intense-fg ansi-bold">if</span> chunksize <span class="ansi-green-intense-fg ansi-bold">or</span> iterator<span class="ansi-yellow-intense-fg ansi-bold">:</span>

<span class="ansi-green-intense-fg ansi-bold">C:\Anaconda3\lib\site-packages\pandas\io\parsers.py</span> in <span class="ansi-cyan-fg">__init__</span><span class="ansi-blue-intense-fg ansi-bold">(self, f, engine, **kwds)</span>
<span class="ansi-green-fg">    893</span>             self<span class="ansi-yellow-intense-fg ansi-bold">.</span>options<span class="ansi-yellow-intense-fg ansi-bold">[</span><span class="ansi-blue-intense-fg ansi-bold">&#39;has_index_names&#39;</span><span class="ansi-yellow-intense-fg ansi-bold">]</span> <span class="ansi-yellow-intense-fg ansi-bold">=</span> kwds<span class="ansi-yellow-intense-fg ansi-bold">[</span><span class="ansi-blue-intense-fg ansi-bold">&#39;has_index_names&#39;</span><span class="ansi-yellow-intense-fg ansi-bold">]</span>
<span class="ansi-green-fg">    894</span>
<span class="ansi-green-intense-fg ansi-bold">--&gt; 895</span><span class="ansi-yellow-intense-fg ansi-bold">         </span>self<span class="ansi-yellow-intense-fg ansi-bold">.</span>_make_engine<span class="ansi-yellow-intense-fg ansi-bold">(</span>self<span class="ansi-yellow-intense-fg ansi-bold">.</span>engine<span class="ansi-yellow-intense-fg ansi-bold">)</span>
<span class="ansi-green-fg">    896</span>
<span class="ansi-green-fg">    897</span>     <span class="ansi-green-intense-fg ansi-bold">def</span> close<span class="ansi-yellow-intense-fg ansi-bold">(</span>self<span class="ansi-yellow-intense-fg ansi-bold">)</span><span class="ansi-yellow-intense-fg ansi-bold">:</span>

<span class="ansi-green-intense-fg ansi-bold">C:\Anaconda3\lib\site-packages\pandas\io\parsers.py</span> in <span class="ansi-cyan-fg">_make_engine</span><span class="ansi-blue-intense-fg ansi-bold">(self, engine)</span>
<span class="ansi-green-fg">   1120</span>     <span class="ansi-green-intense-fg ansi-bold">def</span> _make_engine<span class="ansi-yellow-intense-fg ansi-bold">(</span>self<span class="ansi-yellow-intense-fg ansi-bold">,</span> engine<span class="ansi-yellow-intense-fg ansi-bold">=</span><span class="ansi-blue-intense-fg ansi-bold">&#39;c&#39;</span><span class="ansi-yellow-intense-fg ansi-bold">)</span><span class="ansi-yellow-intense-fg ansi-bold">:</span>
<span class="ansi-green-fg">   1121</span>         <span class="ansi-green-intense-fg ansi-bold">if</span> engine <span class="ansi-yellow-intense-fg ansi-bold">==</span> <span class="ansi-blue-intense-fg ansi-bold">&#39;c&#39;</span><span class="ansi-yellow-intense-fg ansi-bold">:</span>
<span class="ansi-green-intense-fg ansi-bold">-&gt; 1122</span><span class="ansi-yellow-intense-fg ansi-bold">             </span>self<span class="ansi-yellow-intense-fg ansi-bold">.</span>_engine <span class="ansi-yellow-intense-fg ansi-bold">=</span> CParserWrapper<span class="ansi-yellow-intense-fg ansi-bold">(</span>self<span class="ansi-yellow-intense-fg ansi-bold">.</span>f<span class="ansi-yellow-intense-fg ansi-bold">,</span> <span class="ansi-yellow-intense-fg ansi-bold">**</span>self<span class="ansi-yellow-intense-fg ansi-bold">.</span>options<span class="ansi-yellow-intense-fg ansi-bold">)</span>
<span class="ansi-green-fg">   1123</span>         <span class="ansi-green-intense-fg ansi-bold">else</span><span class="ansi-yellow-intense-fg ansi-bold">:</span>
<span class="ansi-green-fg">   1124</span>             <span class="ansi-green-intense-fg ansi-bold">if</span> engine <span class="ansi-yellow-intense-fg ansi-bold">==</span> <span class="ansi-blue-intense-fg ansi-bold">&#39;python&#39;</span><span class="ansi-yellow-intense-fg ansi-bold">:</span>

<span class="ansi-green-intense-fg ansi-bold">C:\Anaconda3\lib\site-packages\pandas\io\parsers.py</span> in <span class="ansi-cyan-fg">__init__</span><span class="ansi-blue-intense-fg ansi-bold">(self, src, **kwds)</span>
<span class="ansi-green-fg">   1851</span>         kwds<span class="ansi-yellow-intense-fg ansi-bold">[</span><span class="ansi-blue-intense-fg ansi-bold">&#39;usecols&#39;</span><span class="ansi-yellow-intense-fg ansi-bold">]</span> <span class="ansi-yellow-intense-fg ansi-bold">=</span> self<span class="ansi-yellow-intense-fg ansi-bold">.</span>usecols
<span class="ansi-green-fg">   1852</span>
<span class="ansi-green-intense-fg ansi-bold">-&gt; 1853</span><span class="ansi-yellow-intense-fg ansi-bold">         </span>self<span class="ansi-yellow-intense-fg ansi-bold">.</span>_reader <span class="ansi-yellow-intense-fg ansi-bold">=</span> parsers<span class="ansi-yellow-intense-fg ansi-bold">.</span>TextReader<span class="ansi-yellow-intense-fg ansi-bold">(</span>src<span class="ansi-yellow-intense-fg ansi-bold">,</span> <span class="ansi-yellow-intense-fg ansi-bold">**</span>kwds<span class="ansi-yellow-intense-fg ansi-bold">)</span>
<span class="ansi-green-fg">   1854</span>         self<span class="ansi-yellow-intense-fg ansi-bold">.</span>unnamed_cols <span class="ansi-yellow-intense-fg ansi-bold">=</span> self<span class="ansi-yellow-intense-fg ansi-bold">.</span>_reader<span class="ansi-yellow-intense-fg ansi-bold">.</span>unnamed_cols
<span class="ansi-green-fg">   1855</span>

<span class="ansi-green-intense-fg ansi-bold">pandas/_libs/parsers.pyx</span> in <span class="ansi-cyan-fg">pandas._libs.parsers.TextReader.__cinit__</span><span class="ansi-blue-intense-fg ansi-bold">()</span>

<span class="ansi-green-intense-fg ansi-bold">pandas/_libs/parsers.pyx</span> in <span class="ansi-cyan-fg">pandas._libs.parsers.TextReader._setup_parser_source</span><span class="ansi-blue-intense-fg ansi-bold">()</span>

<span class="ansi-red-intense-fg ansi-bold">FileNotFoundError</span>: [Errno 2] File b&#39;data\\minnesota_2012.csv&#39; does not exist: b&#39;data\\minnesota_2012.csv&#39;
</pre></div></div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="Set-column-names-(pre-init)">
<h2>2.4. Set column names <em>(pre-init)</em><a class="headerlink" href="#Set-column-names-(pre-init)" title="Permalink to this headline">¶</a></h2>
<p><em>The table containing the experimental data</em><strong>must</strong><em>have a minimum of two columns:</em> * <em>Nitrogen fertilizer rate</em> * <em>Grain yield</em></p>
<p><code class="docutils literal notranslate"><span class="pre">EONR</span></code> accepts custom column names. Just be sure to set them by either using <code class="docutils literal notranslate"><span class="pre">EONR.set_column_names()</span></code> or by passing them to <code class="docutils literal notranslate"><span class="pre">EONR.calculate_eonr()</span></code>. We will declare the names of the these two columns as they exist in the <code class="docutils literal notranslate"><span class="pre">Pandas</span></code> dataframe so they can be passed to <code class="docutils literal notranslate"><span class="pre">EONR</span></code> later:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">col_n_app</span> <span class="o">=</span> <span class="s1">&#39;rate_n_applied_kgha&#39;</span>
<span class="n">col_yld</span> <span class="o">=</span> <span class="s1">&#39;yld_grain_dry_kgha&#39;</span>
</pre></div>
</div>
</div>
<p>Each row of data in our dataframe should correspond to a nitrogen rate treatment plot. It is common to have several other columns describing each treatment plot (e.g., year, location, replication, nitrogen timing, etc.). These aren’t necessary, but <code class="docutils literal notranslate"><span class="pre">EONR</span></code> will try pull information from “year”, “location”, and “nitrogen timing” for labeling the plots that are generated (see <a class="reference external" href="../../docs/build/html/plotting.html">Plotting</a> for more information).</p>
</div>
<hr class="docutils" />
<div class="section" id="Set-units">
<h2>2.5. Set units<a class="headerlink" href="#Set-units" title="Permalink to this headline">¶</a></h2>
<p>Although optional, it is good practice to declare units so we don’t get confused:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">unit_currency</span> <span class="o">=</span> <span class="s1">&#39;$&#39;</span>
<span class="n">unit_fert</span> <span class="o">=</span> <span class="s1">&#39;kg&#39;</span>
<span class="n">unit_grain</span> <span class="o">=</span> <span class="s1">&#39;kg&#39;</span>
<span class="n">unit_area</span> <span class="o">=</span> <span class="s1">&#39;ha&#39;</span>
</pre></div>
</div>
</div>
<p>These unit variables are only used for plotting (titles and axes labels), and they are not actually used for any computations.</p>
</div>
<hr class="docutils" />
<div class="section" id="Set-economic-conditions">
<h2>2.6. Set economic conditions<a class="headerlink" href="#Set-economic-conditions" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">EONR</span></code> computes the <strong>Economic</strong><em>Optimum Nitrogen Rate</em> for any economic scenario that we define. All that is required is to declare the cost of the nitrogen fertilizer (per unit, as defined above) and the price of grain (also per unit). Note that the cost of nitrogen fertilizer can be set to zero, and the <strong>Agronomic</strong><em>Optimum Nitrogen Rate</em> will be computed.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">cost_n_fert</span> <span class="o">=</span> <span class="mf">0.88</span>  <span class="c1"># in USD per kg nitrogen</span>
<span class="n">price_grain</span> <span class="o">=</span> <span class="mf">0.157</span>  <span class="c1"># in USD per kg grain</span>
</pre></div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="Initialize-EONR">
<h2>2.7. Initialize <code class="docutils literal notranslate"><span class="pre">EONR</span></code><a class="headerlink" href="#Initialize-EONR" title="Permalink to this headline">¶</a></h2>
<p>At this point, we can initialize an instance of <code class="docutils literal notranslate"><span class="pre">EONR</span></code>.</p>
<p><em>Before doing so, we may want to set the base directory.</em> <code class="docutils literal notranslate"><span class="pre">EONR.base_dir</span></code> <em>is the default location for saving plots and data processed by</em> <code class="docutils literal notranslate"><span class="pre">EONR</span></code><em>. If</em><code class="docutils literal notranslate"><span class="pre">EONR.base_dir</span></code> <em>is not set, it will be set to be a folder named “eonr_temp_out” in the current working directory during the intitialization (to see your current working directory, type</em> <code class="docutils literal notranslate"><span class="pre">os.getcwd()</span></code><em>). If you do not wish to use this as your current working directory, it can be passed to the</em> <code class="docutils literal notranslate"><span class="pre">EONR</span></code> <em>instance using the</em>
<code class="docutils literal notranslate"><span class="pre">base_dir</span></code> <em>keyword.</em></p>
<p>For demonstration purposes, we will set <code class="docutils literal notranslate"><span class="pre">EONR.base_dir</span></code> to what would be the default folder if nothing were passed to the <code class="docutils literal notranslate"><span class="pre">base_dir</span></code> keyword –&gt; that is, we will choose a folder named “eonr_temp_out” in the current working directory (<code class="docutils literal notranslate"><span class="pre">EONR</span></code> will create the directory if it does not exist).</p>
<p>And finally, to create an instance of <code class="docutils literal notranslate"><span class="pre">EONR</span></code>, pass the appropriate variables to <code class="docutils literal notranslate"><span class="pre">EONR()</span></code>:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="n">base_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span> <span class="s1">&#39;eonr_temp_out&#39;</span><span class="p">)</span>

<span class="n">my_eonr</span> <span class="o">=</span> <span class="n">EONR</span><span class="p">(</span><span class="n">cost_n_fert</span><span class="o">=</span><span class="n">cost_n_fert</span><span class="p">,</span>
               <span class="n">price_grain</span><span class="o">=</span><span class="n">price_grain</span><span class="p">,</span>
               <span class="n">col_n_app</span><span class="o">=</span><span class="n">col_n_app</span><span class="p">,</span>
               <span class="n">col_yld</span><span class="o">=</span><span class="n">col_yld</span><span class="p">,</span>
               <span class="n">unit_currency</span><span class="o">=</span><span class="n">unit_currency</span><span class="p">,</span>
               <span class="n">unit_grain</span><span class="o">=</span><span class="n">unit_grain</span><span class="p">,</span>
               <span class="n">unit_fert</span><span class="o">=</span><span class="n">unit_fert</span><span class="p">,</span>
               <span class="n">unit_area</span><span class="o">=</span><span class="n">unit_area</span><span class="p">,</span>
               <span class="n">base_dir</span><span class="o">=</span><span class="n">base_dir</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="Calculate-the-EONR">
<h2>2.8. Calculate the EONR<a class="headerlink" href="#Calculate-the-EONR" title="Permalink to this headline">¶</a></h2>
<p>With <code class="docutils literal notranslate"><span class="pre">my_eonr</span></code> initialized as an instance of <code class="docutils literal notranslate"><span class="pre">EONR</span></code>, we can now calculate the economic optimum nitrogen rate by calling the <code class="docutils literal notranslate"><span class="pre">calculate_eonr()</span></code> method and passing the dataframe with the loaded data:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">my_eonr</span><span class="o">.</span><span class="n">calculate_eonr</span><span class="p">(</span><span class="n">df_data</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>It may take several seconds to run - this is because it computes the profile-likelihood and bootstrap confidence intervals by default (and as described in the <a class="reference external" href="#background">Background section</a> this is the real novelty of <code class="docutils literal notranslate"><span class="pre">EONR</span></code> package).</p>
<p>And that’s it! The economic optimum for this dataset and economic scenario was <strong>162 kg nitrogen per ha</strong> (with 90% confidence bounds at <strong>131</strong> and <strong>208 kg per ha</strong>) and resulted in a maximum net return of nearly <strong>$770 per ha</strong>.</p>
</div>
<hr class="docutils" />
<div class="section" id="Plotting-the-EONR">
<h2>2.9. Plotting the EONR<a class="headerlink" href="#Plotting-the-EONR" title="Permalink to this headline">¶</a></h2>
<p>This is great, but of course it’d be useful to see our data and results plotted. Do this by calling the <code class="docutils literal notranslate"><span class="pre">plot_eonr()</span></code> module and <em>(optionally)</em> passing the minimum/maximum values for each axis:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">my_eonr</span><span class="o">.</span><span class="n">plot_eonr</span><span class="p">(</span><span class="n">x_min</span><span class="o">=-</span><span class="mi">5</span><span class="p">,</span> <span class="n">x_max</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">y_min</span><span class="o">=-</span><span class="mi">100</span><span class="p">,</span> <span class="n">y_max</span><span class="o">=</span><span class="mi">1400</span><span class="p">)</span>
</pre></div>
</div>
</div>
<ul class="simple">
<li>The blue points are <strong>experimental data</strong> (yield value in \$ per ha as a function of nitrogen rate)</li>
<li>The blue line is the best-fit quadratic-plateau model representing <strong>gross return to nitrogen</strong></li>
<li>The red line is the <strong>cost of nitrogen fertilizer</strong></li>
<li>The green line is the difference between the two and represents the <strong>net return to nitrogen</strong></li>
<li>The green point is the <strong>Economic Optimum Nitrogen Rate (EONR)</strong></li>
<li>The transparent grey box surrounding the EONR/MRTN (green point) illustrates the <strong>90% confidence intervals</strong></li>
</ul>
<p>The EONR is the point on the x-axis where the net return curve (green) reaches the maximum return. The return to nitrogen at the EONR is the <strong>Maximum Return to Nitrogen (MRTN)</strong>, indicating the profit that is earned at the economic optimum nitrogen rate.</p>
<p><em>Notice the economic scenario (i.e., grain price, nitrogen fertilizer cost, etc.) and the “Base zero” values in the upper right corner describing the assumptions of EONR calculatioon. “Base zero” refers to the initial y-intercept of the gross return model (this setting can be turned on/off by seeting</em> <code class="docutils literal notranslate"><span class="pre">EONR.base_zero</span></code> <em>to</em> <code class="docutils literal notranslate"><span class="pre">True/False</span></code> <a class="reference external" href="quick_start#setting-base-zero">Setting “base zero” section</a><em>for more information).</em></p>
</div>
<hr class="docutils" />
<div class="section" id="Accesing-complete-results">
<h2>2.10. Accesing complete results<a class="headerlink" href="#Accesing-complete-results" title="Permalink to this headline">¶</a></h2>
<p>All results (e.g., EONR, MRTN, r2 and root mean squared errors from best-fit models, confidence intervals, etc.) are stored in the <code class="docutils literal notranslate"><span class="pre">EONR.df_results</span></code> dataframe:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">my_eonr</span><span class="o">.</span><span class="n">df_results</span>
</pre></div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="Visualizing-all-confidence-intervals">
<h2>2.11. Visualizing all confidence intervals<a class="headerlink" href="#Visualizing-all-confidence-intervals" title="Permalink to this headline">¶</a></h2>
<p>By default, the confidence intervals (CIs) are calculated at many alpha levels. Noting that <span class="math notranslate nohighlight">\(\text{CI} = 1-\alpha\)</span>, let’s plot the <strong>Wald</strong> CIs, <strong>profile-likelihood</strong> CIs, and <strong>bootstrap</strong> CIs for a range of <span class="math notranslate nohighlight">\(\alpha\)</span> values.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">my_eonr</span><span class="o">.</span><span class="n">plot_tau</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p>This plot shows the lower and upper confidence intervals of the <em>True EONR</em> (<em>True EONR</em> refers to the actual EONR value, which is not actually known due to uncertainty in the dataset). At 0% confidence, the <em>True EONR</em> is the <em>maximum likelihood</em> value, but as we increase the confidence level from 67%, 80%, 90%, 95%, and 99%, the statistical range of the <em>True EONR</em> widens.</p>
<p>In general, the profile-likelihood CIs are considered the most accurate of the three methods because they reflect the actual, often asymmetric, uncertainty in a parameter estimate <a class="reference external" href="https://www.tandfonline.com/doi/abs/10.1080/01621459.1990.10476233">Cook &amp; Weisberg, 1990</a>.</p>
</div>
<hr class="docutils" />
<div class="section" id="Accessing-complete-CI-results">
<h2>2.12. Accessing complete CI results<a class="headerlink" href="#Accessing-complete-CI-results" title="Permalink to this headline">¶</a></h2>
<p>All data relating to the calculation of the CIs are saved in the <code class="docutils literal notranslate"><span class="pre">EONR.df_ci</span></code> dataframe:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">my_eonr</span><span class="o">.</span><span class="n">df_ci</span>
</pre></div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="Adjusting-the-economic-scenario">
<h2>2.13. Adjusting the economic scenario<a class="headerlink" href="#Adjusting-the-economic-scenario" title="Permalink to this headline">¶</a></h2>
<p>These results were calculated for a specific economic scenario, but the cost of fertilizer and price of grain can be adjusted to run <code class="docutils literal notranslate"><span class="pre">EONR</span></code> for another economic scenario. Just adjust the economic scenario by passing any of:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">cost_n_fert</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">price_grain</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">cost_n_social</span></code></li>
</ul>
<p>to <code class="docutils literal notranslate"><span class="pre">EONR.update_econ()</span></code>:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">cost_n_fert</span> <span class="o">=</span> <span class="mf">1.32</span>  <span class="c1"># adjusted from $0.88 per kg nitrogen</span>
<span class="n">my_eonr</span><span class="o">.</span><span class="n">update_econ</span><span class="p">(</span><span class="n">cost_n_fert</span><span class="o">=</span><span class="n">cost_n_fert</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="Environmental-observations">
<h2>2.14. Environmental observations<a class="headerlink" href="#Environmental-observations" title="Permalink to this headline">¶</a></h2>
<p>You’ll notice above that we can pass the <code class="docutils literal notranslate"><span class="pre">cost_n_social</span></code> variable to <code class="docutils literal notranslate"><span class="pre">EONR.update_econ()</span></code>. This is becuase <code class="docutils literal notranslate"><span class="pre">EONR</span></code> will calculate the <strong>Socially Optimum Nitrogen Rate (SONR)</strong> if certain environmental data are available. For more information about the <strong>SONR</strong>, refer to the <a class="reference external" href="background.html#The-social-cost-of-nitrogen">Background chapter</a>.</p>
<p>In the same way that <code class="docutils literal notranslate"><span class="pre">cost_n_fert</span></code> was adjusted in the previous code, <code class="docutils literal notranslate"><span class="pre">cost_n_social</span></code> will be set (for the first time):</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">cost_n_social</span> <span class="o">=</span> <span class="mf">1.10</span> <span class="c1"># in USD per kg nitrogen</span>
<span class="n">my_eonr</span><span class="o">.</span><span class="n">update_econ</span><span class="p">(</span><span class="n">cost_n_social</span><span class="o">=</span><span class="n">cost_n_social</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="Set-column-names-(post-init)">
<h2>2.15. Set column names <em>(post-init)</em><a class="headerlink" href="#Set-column-names-(post-init)" title="Permalink to this headline">¶</a></h2>
<p>You may have noticed that <a class="reference external" href="quick_start.html#Load-the-data">the loaded data</a> for this tutorial contains columns for nitrogen uptake (“nup_total_kgha”) and available nitrogen (“soil_plus_fert_n_kgha”). This data can be used to calculate the <strong>SONR</strong> as long as the column names are correctly set.</p>
<p>The column names were set for nitrogen fertilizer rate (<code class="docutils literal notranslate"><span class="pre">col_n_app</span></code>) and grain yield (<code class="docutils literal notranslate"><span class="pre">col_yld</span></code>) during the initialization of <code class="docutils literal notranslate"><span class="pre">EONR</span></code>, but they haven’t been set for the nitrogen uptake or available nitrogen columns. This can be done (even after initilization of <code class="docutils literal notranslate"><span class="pre">EONR</span></code>) using <code class="docutils literal notranslate"><span class="pre">EONR.set_column_names()</span></code>:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">col_crop_nup</span> <span class="o">=</span> <span class="s1">&#39;nup_total_kgha&#39;</span>
<span class="n">col_n_avail</span> <span class="o">=</span> <span class="s1">&#39;soil_plus_fert_n_kgha&#39;</span>

<span class="n">my_eonr</span><span class="o">.</span><span class="n">set_column_names</span><span class="p">(</span><span class="n">col_crop_nup</span><span class="o">=</span><span class="n">col_crop_nup</span><span class="p">,</span>
                         <span class="n">col_n_avail</span><span class="o">=</span><span class="n">col_n_avail</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">EONR</span></code> simply subtracts <em>end of season total nitrogen uptake</em> from <em>available nitrogen</em> to get <strong>net crop nitrogen use</strong>, which is subsequently used to calculate the <strong>SONR</strong>.</p>
</div>
<hr class="docutils" />
<div class="section" id="Run-EONR-for-the-socially-optimum-rate">
<h2>2.16. Run <code class="docutils literal notranslate"><span class="pre">EONR</span></code> for the socially optimum rate<a class="headerlink" href="#Run-EONR-for-the-socially-optimum-rate" title="Permalink to this headline">¶</a></h2>
<p>Then simply run <code class="docutils literal notranslate"><span class="pre">EONR.calculate_eonr()</span></code> again to calculate the <strong>SONR</strong> for the updated economic scenario:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">my_eonr</span><span class="o">.</span><span class="n">calculate_eonr</span><span class="p">(</span><span class="n">df_data</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>The new results are appended to the <code class="docutils literal notranslate"><span class="pre">EONR.df_results</span></code> dataframe:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">my_eonr</span><span class="o">.</span><span class="n">df_results</span>
</pre></div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">EONR.plot_eonr()</span></code> and <code class="docutils literal notranslate"><span class="pre">EONR.plot_tau()</span></code> can be called again to plot the new results:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">my_eonr</span><span class="o">.</span><span class="n">plot_eonr</span><span class="p">(</span><span class="n">x_min</span><span class="o">=-</span><span class="mi">5</span><span class="p">,</span> <span class="n">x_max</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">y_min</span><span class="o">=-</span><span class="mi">200</span><span class="p">,</span> <span class="n">y_max</span><span class="o">=</span><span class="mi">1400</span><span class="p">)</span>
<span class="n">my_eonr</span><span class="o">.</span><span class="n">plot_tau</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p>Notice the added data in the nitrogen response plot: * The gold points represent <strong>net crop nitrogen use</strong> (expressed as a \$ amount based on the value set for <code class="docutils literal notranslate"><span class="pre">cost_n_social</span></code>) * The gold line is the best-fit exponential model representing <strong>net crop nitrogen use</strong> (<code class="docutils literal notranslate"><span class="pre">EONR</span></code> fits both a linear and exponential model for this, then uses whichever has a higher <span class="math notranslate nohighlight">\(\text{r}^2\)</span>)</p>
</div>
<hr class="docutils" />
<div class="section" id="Saving-the-data">
<h2>2.17. Saving the data<a class="headerlink" href="#Saving-the-data" title="Permalink to this headline">¶</a></h2>
<p>The results generated by <code class="docutils literal notranslate"><span class="pre">EONR</span></code> can be saved to the <code class="docutils literal notranslate"><span class="pre">EONR.base_dir</span></code> using the <code class="docutils literal notranslate"><span class="pre">Pandas</span></code> <code class="docutils literal notranslate"><span class="pre">df.to_csv()</span></code> function. A folder will be created in the base_dir whose name is determined by the <strong>current economic scenario</strong> of <code class="docutils literal notranslate"><span class="pre">my_eonr</span></code> (in this case “social_154_1100”, corresponding to <code class="docutils literal notranslate"><span class="pre">cost_n_social</span> <span class="pre">&gt;</span> <span class="pre">0</span></code>, <code class="docutils literal notranslate"><span class="pre">price_ratio</span> <span class="pre">=</span> <span class="pre">15.4</span></code>, and <code class="docutils literal notranslate"><span class="pre">cost_n_social</span> <span class="pre">=</span> <span class="pre">1.10</span></code>, respectively):</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="n">my_eonr</span><span class="o">.</span><span class="n">base_dir</span><span class="p">)</span>

<span class="n">my_eonr</span><span class="o">.</span><span class="n">df_results</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">my_eonr</span><span class="o">.</span><span class="n">base_dir</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span> <span class="s1">&#39;quick_start_results.csv&#39;</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">my_eonr</span><span class="o">.</span><span class="n">df_ci</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">my_eonr</span><span class="o">.</span><span class="n">base_dir</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span> <span class="s1">&#39;quick_start_ci.csv&#39;</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Upon generating figures using <code class="docutils literal notranslate"><span class="pre">EONR.plot_eonr()</span></code> or <code class="docutils literal notranslate"><span class="pre">EONR.plot_tau()</span></code>, the <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> figures are stored to the <code class="docutils literal notranslate"><span class="pre">EONR</span></code> class. They can be saved to file by using <code class="docutils literal notranslate"><span class="pre">EONR.plot_save()</span></code>:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">fname_eonr_plot</span> <span class="o">=</span> <span class="s1">&#39;eonr_mn2012_pre.png&#39;</span>
<span class="n">fname_tau_plot</span> <span class="o">=</span> <span class="s1">&#39;tau_mn2012_pre.png&#39;</span>

<span class="n">my_eonr</span><span class="o">.</span><span class="n">plot_save</span><span class="p">(</span><span class="n">fname</span><span class="o">=</span><span class="n">fname_eonr_plot</span><span class="p">,</span> <span class="n">fig</span><span class="o">=</span><span class="n">my_eonr</span><span class="o">.</span><span class="n">fig_eonr</span><span class="p">)</span>
<span class="n">my_eonr</span><span class="o">.</span><span class="n">plot_save</span><span class="p">(</span><span class="n">fname</span><span class="o">=</span><span class="n">fname_tau_plot</span><span class="p">,</span> <span class="n">fig</span><span class="o">=</span><span class="n">my_eonr</span><span class="o">.</span><span class="n">fig_tau</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2019, Tyler J Nigon.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.5.<br/>
    </p>
  </div>
</footer>
  </body>
</html>